{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"dspy-cli","text":"<p>Deploy DSPy applications with ease.</p> <p>dspy-cli is a command-line tool for scaffolding, serving, and deploying DSPy applications. It provides convention-based project structure, local development servers, and seamless deployment to production.</p>"},{"location":"#quick-start","title":"Quick Start","text":"<pre><code># Install with uv (recommended)\nuv tool install dspy-cli\n\n# Or with pipx\npipx install dspy-cli\n\n# Create a new DSPy project\ndspy-cli new my-project\ncd my-project\n\n# Add your API keys to .env\n# OPENAI_API_KEY=sk-...\n\n# Install dependencies\nuv sync\n\n# Start local development server\ndspy-cli serve\n\n# Deploy to production\ndspy-cli deploy\n</code></pre>"},{"location":"#features","title":"Features","text":"<ul> <li>Project Scaffolding - Generate complete DSPy projects with best-practice structure</li> <li>Local Development - Test your DSPy modules locally with hot reload</li> <li>Component Generation - Add new modules, signatures, and optimizers to existing projects</li> <li>Production Deployment - Deploy to production with Docker and automatic routing</li> <li>Type-Safe - Full type hints and signature validation</li> </ul>"},{"location":"#installation","title":"Installation","text":""},{"location":"#uv-recommended","title":"uv (Recommended)","text":"<pre><code>uv tool install dspy-cli\n</code></pre>"},{"location":"#pipx","title":"pipx","text":"<pre><code>pipx install dspy-cli\n</code></pre>"},{"location":"#pip","title":"pip","text":"<pre><code>pip install dspy-cli\n</code></pre>"},{"location":"#verify-installation","title":"Verify Installation","text":"<pre><code>dspy-cli --version\n</code></pre>"},{"location":"#your-first-project","title":"Your First Project","text":""},{"location":"#1-create-a-new-project","title":"1. Create a new project","text":"<pre><code>dspy-cli new qa-bot\ncd qa-bot\n</code></pre> <p>This creates a complete project structure:</p> <pre><code>qa-bot/\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 qa_bot/\n\u2502       \u251c\u2500\u2500 modules/        # DSPy modules (programs)\n\u2502       \u251c\u2500\u2500 signatures/     # Input/output signatures\n\u2502       \u251c\u2500\u2500 optimizers/     # Optimization pipelines\n\u2502       \u2514\u2500\u2500 metrics/        # Evaluation metrics\n\u251c\u2500\u2500 tests/\n\u251c\u2500\u2500 data/\n\u251c\u2500\u2500 dspy.config.yaml        # Deployment config\n\u251c\u2500\u2500 pyproject.toml\n\u2514\u2500\u2500 .env                    # API keys (add yours here)\n</code></pre>"},{"location":"#2-add-your-api-keys","title":"2. Add your API keys","text":"<p>Edit <code>.env</code>:</p> <pre><code>OPENAI_API_KEY=sk-...\n</code></pre>"},{"location":"#3-install-dependencies","title":"3. Install dependencies","text":"<pre><code>uv sync\n</code></pre>"},{"location":"#4-start-the-development-server","title":"4. Start the development server","text":"<pre><code>dspy-cli serve\n</code></pre> <p>This starts a FastAPI server at <code>http://localhost:8000</code> with: - Auto-discovery of DSPy modules - Interactive API documentation at <code>/docs</code> - Hot reload on code changes</p>"},{"location":"#5-test-your-module","title":"5. Test your module","text":"<pre><code>curl -X POST \"http://localhost:8000/predict/qa_bot_predict\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"question\": \"What is DSPy?\"}'\n</code></pre>"},{"location":"#6-generate-additional-components","title":"6. Generate additional components","text":"<pre><code># Add a new ChainOfThought module\ndspy-cli g scaffold analyzer -m CoT -s \"text -&gt; summary, sentiment\"\n\n# Add a ReAct module\ndspy-cli g scaffold agent -m ReAct -s \"task -&gt; result\"\n</code></pre>"},{"location":"#7-deploy-to-production","title":"7. Deploy to production","text":"<pre><code>dspy-cli deploy\n</code></pre> <p>This packages your code and deploys to the control plane, returning: - Unique endpoint URL - Runtime API key (saved to <code>~/.dspy/keys/</code>) - Version information</p>"},{"location":"#project-configuration","title":"Project Configuration","text":"<p>Edit <code>dspy.config.yaml</code> to configure your deployment:</p> <pre><code># App identifier (used for routing)\napp_id: qa-bot\n\n# Python module path to your DSPy module\nmodule_path: qa_bot.modules.qa_bot_predict:QaBotPredict\n\n# Directory containing your source code\ncode_dir: src\n\n# Deployment host (production)\nhost: platform.cmpnd.ai\n\n# Model configuration\nmodels:\n  default: openai:gpt-4o-mini\n\n  registry:\n    openai:gpt-4o-mini:\n      model: openai/gpt-4o-mini\n      env: OPENAI_API_KEY\n      max_tokens: 16000\n</code></pre>"},{"location":"#development-workflow","title":"Development Workflow","text":""},{"location":"#local-development","title":"Local Development","text":"<pre><code># Start server with UI\ndspy-cli serve --ui\n\n# Custom port and host\ndspy-cli serve --port 8080 --host 127.0.0.1\n\n# Use specific Python interpreter\ndspy-cli serve --python /path/to/venv/bin/python\n</code></pre>"},{"location":"#testing","title":"Testing","text":"<pre><code># Run tests\npytest\n\n# Run with coverage\npytest --cov=src/qa_bot\n</code></pre>"},{"location":"#deployment","title":"Deployment","text":"<pre><code># Deploy to default (production)\ndspy-cli deploy\n\n# Deploy to local control plane\ndspy-cli deploy --control-url http://localhost:9000\n\n# Deploy with custom API key\ndspy-cli deploy --api-key your-key-here\n</code></pre>"},{"location":"#project-structure-conventions","title":"Project Structure Conventions","text":"<p>dspy-cli follows convention-over-configuration:</p> <ul> <li><code>src/&lt;package&gt;/modules/</code> - DSPy modules (auto-discovered by server)</li> <li><code>src/&lt;package&gt;/signatures/</code> - Signature definitions</li> <li><code>src/&lt;package&gt;/optimizers/</code> - Optimization pipelines</li> <li><code>src/&lt;package&gt;/metrics/</code> - Evaluation metrics</li> <li><code>dspy.config.yaml</code> - Deployment configuration</li> <li><code>.env</code> - API keys and secrets (never commit!)</li> </ul>"},{"location":"#examples","title":"Examples","text":""},{"location":"#simple-question-answering","title":"Simple Question Answering","text":"<pre><code># src/qa_bot/modules/qa_predict.py\nimport dspy\nfrom qa_bot.signatures.qa import QaSignature\n\nclass QaPredict(dspy.Module):\n    def __init__(self):\n        self.predictor = dspy.Predict(QaSignature)\n\n    def forward(self, payload: dict):\n        return self.predictor(**payload)\n</code></pre> <pre><code># src/qa_bot/signatures/qa.py\nimport dspy\n\nclass QaSignature(dspy.Signature):\n    question: str = dspy.InputField(desc=\"Question to answer\")\n    answer: str = dspy.OutputField(desc=\"Answer to the question\")\n</code></pre>"},{"location":"#chain-of-thought-reasoning","title":"Chain of Thought Reasoning","text":"<p>Generate with:</p> <pre><code>dspy-cli g scaffold reasoning -m CoT -s \"context: list[str], question -&gt; reasoning, answer\"\n</code></pre>"},{"location":"#multi-step-agent","title":"Multi-Step Agent","text":"<p>Generate with:</p> <pre><code>dspy-cli g scaffold agent -m ReAct -s \"task, available_tools: list[str] -&gt; steps: list[str], result\"\n</code></pre>"},{"location":"#command-reference","title":"Command Reference","text":"<p>See CLI Reference for detailed command documentation.</p>"},{"location":"#getting-help","title":"Getting Help","text":"<ul> <li>Issues: GitHub Issues</li> <li>Contributing: Contributing Guide</li> <li>DSPy Documentation: dspy.ai</li> </ul>"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li>Explore all CLI commands</li> <li>Learn how to contribute</li> <li>Read the DSPy documentation</li> </ul>"},{"location":"cli-reference/","title":"CLI Reference","text":"<p>Complete reference for all dspy-cli commands.</p>"},{"location":"cli-reference/#dspy-cli-new","title":"dspy-cli new","text":"<p>Create a new DSPy project with boilerplate structure.</p> <pre><code>dspy-cli new PROJECT_NAME [OPTIONS]\n</code></pre> <p>Arguments:</p> <ul> <li><code>PROJECT_NAME</code> - Name of the project (creates directory)</li> </ul> <p>Options:</p> <ul> <li><code>-p, --program-name NAME</code> - Name of initial program (default: derived from project name)</li> <li><code>-s, --signature SIGNATURE</code> - Inline signature string (e.g., <code>\"question -&gt; answer\"</code>)</li> <li><code>--link-dspy-cli PATH</code> - Add uv path override for local dspy-cli development</li> </ul> <p>Examples:</p> <pre><code># Basic project\ndspy-cli new my-project\n\n# With custom program name\ndspy-cli new my-project -p custom_program\n\n# With inline signature\ndspy-cli new my-project -s \"post -&gt; tags: list[str]\"\n\n# Complex signature\ndspy-cli new my-project -p analyzer -s \"text, context: list[str] -&gt; summary\"\n\n# Link to local dspy-cli for development\ndspy-cli new my-project --link-dspy-cli ../dspy-cli\n</code></pre> <p>What it creates:</p> <pre><code>my-project/\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 my_project/\n\u2502       \u251c\u2500\u2500 modules/\n\u2502       \u251c\u2500\u2500 signatures/\n\u2502       \u251c\u2500\u2500 optimizers/\n\u2502       \u251c\u2500\u2500 metrics/\n\u2502       \u2514\u2500\u2500 utils/\n\u251c\u2500\u2500 tests/\n\u251c\u2500\u2500 data/\n\u251c\u2500\u2500 logs/\n\u251c\u2500\u2500 dspy.config.yaml\n\u251c\u2500\u2500 pyproject.toml\n\u251c\u2500\u2500 .env\n\u251c\u2500\u2500 .gitignore\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 .dockerignore\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"cli-reference/#dspy-cli-serve","title":"dspy-cli serve","text":"<p>Start a local HTTP API server that exposes your DSPy modules.</p> <pre><code>dspy-cli serve [OPTIONS]\n</code></pre> <p>Options:</p> <ul> <li><code>--port PORT</code> - Port to run server on (default: 8000)</li> <li><code>--host HOST</code> - Host to bind to (default: 0.0.0.0)</li> <li><code>--logs-dir DIR</code> - Directory for logs (default: ./logs)</li> <li><code>-u, --ui</code> - Enable web UI for interactive testing</li> <li><code>--python PATH</code> - Path to Python interpreter (default: auto-detect)</li> <li><code>--system</code> - Use system Python instead of project venv</li> </ul> <p>Examples:</p> <pre><code># Basic server\ndspy-cli serve\n\n# Custom port and host\ndspy-cli serve --port 8080 --host 127.0.0.1\n\n# With interactive UI\ndspy-cli serve --ui\n\n# Use specific Python interpreter\ndspy-cli serve --python /path/to/venv/bin/python\n\n# Use system Python (skip venv detection)\ndspy-cli serve --system\n</code></pre> <p>Aliases:</p> <ul> <li><code>dspy-cli s</code> - Shorthand for <code>serve</code></li> </ul> <p>What it does:</p> <ol> <li>Validates you're in a DSPy project directory (looks for <code>dspy.config.yaml</code>)</li> <li>Detects project virtual environment (if not already activated)</li> <li>Auto-discovers DSPy modules in <code>src/&lt;package&gt;/modules/</code></li> <li>Starts FastAPI server with endpoints for each module</li> <li>Provides interactive API docs at <code>/docs</code></li> </ol> <p>Endpoints:</p> <ul> <li><code>GET /</code> - Health check</li> <li><code>GET /docs</code> - Interactive API documentation</li> <li><code>POST /predict/{module_name}</code> - Run a specific module</li> <li><code>GET /programs</code> - List all discovered programs</li> </ul>"},{"location":"cli-reference/#dspy-cli-deploy","title":"dspy-cli deploy","text":"<p>Deploy a DSPy application to the control plane.</p> <pre><code>dspy-cli deploy [OPTIONS]\n</code></pre> <p>Options:</p> <ul> <li><code>--control-url URL</code> - Control plane URL (default: derived from dspy.config.yaml <code>host</code>)</li> <li><code>--api-key KEY</code> - API key for authentication (or use <code>DSPY_CONTROL_API_KEY</code> env var)</li> <li><code>--api-key-file PATH</code> - File containing API key</li> <li><code>--app-id ID</code> - Override app_id from dspy.config.yaml</li> <li><code>--code-dir DIR</code> - Override code_dir from dspy.config.yaml</li> </ul> <p>Examples:</p> <pre><code># Deploy to production (uses host from dspy.config.yaml)\ndspy-cli deploy\n\n# Deploy to local control plane\ndspy-cli deploy --control-url http://localhost:9000\n\n# With API key\ndspy-cli deploy --api-key your-key-here\n\n# Using API key file\ndspy-cli deploy --api-key-file ~/.dspy/control.key\n\n# Override app_id\ndspy-cli deploy --app-id my-custom-id\n</code></pre> <p>What it does:</p> <ol> <li>Reads <code>dspy.config.yaml</code> configuration</li> <li>Packages your code as a ZIP file (excludes <code>.git</code>, <code>.venv</code>, <code>__pycache__</code>, etc.)</li> <li>Deploys to control plane via HTTP</li> <li>Saves runtime API key to <code>~/.dspy/keys/{app_id}.key</code></li> <li>Returns deployment information (URL, version, programs)</li> </ol> <p>Output:</p> <pre><code>Deploying to https://platform.cmpnd.ai...\n\nDeployment successful!\n\nApp ID: my-app\nVersion: v1\nRoute: /my-app\n\nPrograms:\n  \u2022 qa_predict\n    Stable:  https://platform.cmpnd.ai/my-app/predict/qa_predict\n    Version: https://platform.cmpnd.ai/my-app/v1/predict/qa_predict\n\nKey: rtk_abc123...\n\nRuntime API key saved to ~/.dspy/keys/\n</code></pre> <p>API Key Resolution:</p> <p>dspy-cli looks for API keys in this order:</p> <ol> <li><code>--api-key</code> flag</li> <li><code>--api-key-file</code> flag</li> <li><code>DSPY_CONTROL_API_KEY</code> environment variable</li> <li><code>~/.dspy/control.key</code> file</li> </ol>"},{"location":"cli-reference/#dspy-cli-generate","title":"dspy-cli generate","text":"<p>Generate new components in an existing DSPy project.</p> <pre><code>dspy-cli generate SUBCOMMAND [OPTIONS]\ndspy-cli g SUBCOMMAND [OPTIONS]  # shorthand\n</code></pre> <p>Aliases:</p> <ul> <li><code>dspy-cli g</code> - Shorthand for <code>generate</code></li> </ul>"},{"location":"cli-reference/#subcommands","title":"Subcommands","text":""},{"location":"cli-reference/#generate-scaffold","title":"generate scaffold","text":"<p>Generate a complete module (signature + module + test).</p> <pre><code>dspy-cli g scaffold PROGRAM_NAME [OPTIONS]\n</code></pre> <p>Arguments:</p> <ul> <li><code>PROGRAM_NAME</code> - Name of the program/module</li> </ul> <p>Options:</p> <ul> <li><code>-m, --module TYPE</code> - DSPy module type (default: Predict)</li> <li>Available: <code>Predict</code>, <code>ChainOfThought</code>, <code>CoT</code>, <code>ProgramOfThought</code>, <code>PoT</code>, <code>ReAct</code>, <code>MultiChainComparison</code>, <code>Refine</code></li> <li><code>-s, --signature SIGNATURE</code> - Inline signature string</li> </ul> <p>Examples:</p> <pre><code># Basic Predict module\ndspy-cli g scaffold qa\n\n# ChainOfThought module\ndspy-cli g scaffold reasoning -m CoT\n\n# With inline signature\ndspy-cli g scaffold summarizer -m CoT -s \"text: str -&gt; summary: str, key_points: list[str]\"\n\n# ReAct agent\ndspy-cli g scaffold agent -m ReAct -s \"task -&gt; steps: list[str], result\"\n\n# Program of Thought\ndspy-cli g scaffold calculator -m PoT -s \"problem -&gt; code, answer\"\n</code></pre> <p>What it creates:</p> <ol> <li>Signature: <code>src/&lt;package&gt;/signatures/&lt;name&gt;.py</code></li> <li>Module: <code>src/&lt;package&gt;/modules/&lt;name&gt;_&lt;type&gt;.py</code></li> <li>Test: <code>tests/test_&lt;name&gt;.py</code></li> </ol>"},{"location":"cli-reference/#environment-variables","title":"Environment Variables","text":"<p>dspy-cli respects these environment variables:</p> <ul> <li><code>DSPY_CONTROL_URL</code> - Default control plane URL for deployments</li> <li><code>DSPY_CONTROL_API_KEY</code> - Default API key for deployments</li> <li><code>DSPY_CLI_PATH</code> - Path to local dspy-cli for development (used by <code>new --link-dspy-cli</code>)</li> <li><code>OPENAI_API_KEY</code> - OpenAI API key (for your DSPy modules)</li> <li>Other model API keys as configured in <code>dspy.config.yaml</code></li> </ul>"},{"location":"cli-reference/#virtual-environment-detection","title":"Virtual Environment Detection","text":"<p>dspy-cli automatically detects and uses your project's virtual environment:</p> <ol> <li>Checks if already running in a venv (via <code>VIRTUAL_ENV</code>)</li> <li>Looks for <code>.venv/</code> in current directory</li> <li>Looks for <code>venv/</code> in current directory</li> <li>Checks Python version compatibility (requires 3.9+)</li> <li>Warns if dspy-cli is not installed in project venv</li> </ol> <p>To bypass venv detection, use <code>--system</code> flag:</p> <pre><code>dspy-cli serve --system\n</code></pre>"},{"location":"cli-reference/#configuration-file","title":"Configuration File","text":"<p>The <code>dspy.config.yaml</code> file configures your deployment:</p> <pre><code># Required: App identifier\napp_id: my-app\n\n# Required: Module path (package.module:ClassName)\nmodule_path: my_app.modules.main:MyModule\n\n# Required: Source code directory\ncode_dir: src\n\n# Optional: Production host\nhost: platform.cmpnd.ai\n\n# Optional: Model configuration\nmodels:\n  default: openai:gpt-4o-mini\n\n  registry:\n    openai:gpt-4o-mini:\n      model: openai/gpt-4o-mini\n      env: OPENAI_API_KEY\n      max_tokens: 16000\n      temperature: 1.0\n      model_type: responses\n</code></pre>"},{"location":"cli-reference/#exit-codes","title":"Exit Codes","text":"<ul> <li><code>0</code> - Success</li> <li><code>1</code> - General error (validation, network, etc.)</li> <li><code>130</code> - Interrupted by user (Ctrl+C)</li> </ul>"},{"location":"cli-reference/#getting-help","title":"Getting Help","text":"<pre><code># General help\ndspy-cli --help\n\n# Command-specific help\ndspy-cli new --help\ndspy-cli serve --help\ndspy-cli deploy --help\ndspy-cli generate --help\n</code></pre>"},{"location":"contributing/","title":"Contributing","text":"<p>Thank you for your interest in contributing to dspy-cli! This guide will help you get started.</p>"},{"location":"contributing/#quick-start","title":"Quick Start","text":"<pre><code># Clone the repository\ngit clone https://github.com/cmpnd-ai/optimization-platform\ncd optimization-platform/dspy-cli\n\n# Install with uv (recommended)\nuv sync --extra dev\n\n# Or with pip\npip install -e '.[dev]'\n\n# Verify installation\ndspy-cli --version\n</code></pre>"},{"location":"contributing/#development-setup","title":"Development Setup","text":""},{"location":"contributing/#using-uv-recommended","title":"Using uv (Recommended)","text":"<pre><code># Install uv if you haven't\ncurl -LsSf https://astral.sh/uv/install.sh | sh\n\n# Create virtual environment and install dependencies\nuv sync --extra dev\n\n# Activate the virtual environment\nsource .venv/bin/activate  # Unix\n.venv\\Scripts\\activate     # Windows\n</code></pre>"},{"location":"contributing/#using-pip","title":"Using pip","text":"<pre><code># Create virtual environment\npython -m venv .venv\nsource .venv/bin/activate  # Unix\n.venv\\Scripts\\activate     # Windows\n\n# Install in editable mode with dev dependencies\npip install -e '.[dev]'\n</code></pre>"},{"location":"contributing/#running-tests","title":"Running Tests","text":"<p>Tests are located in the <code>tests/</code> directory and use pytest.</p> <pre><code># Run all tests\npytest\n\n# Run with coverage\npytest --cov=src/dspy_cli\n\n# Run specific test file\npytest tests/test_commands.py\n\n# Run specific test\npytest tests/test_commands.py::test_new_command\n\n# Run with verbose output\npytest -v\n</code></pre> <p>Important: Tests require the package to be installed in editable mode (<code>pip install -e '.[dev]'</code>) to ensure import behavior matches production.</p>"},{"location":"contributing/#code-style","title":"Code Style","text":"<p>dspy-cli follows these conventions:</p>"},{"location":"contributing/#import-order","title":"Import Order","text":"<ol> <li>Standard library imports</li> <li>Third-party imports (docker, fastapi, pydantic, click, etc.)</li> <li>Local imports</li> </ol> <pre><code>import os\nfrom pathlib import Path\nfrom typing import List, Dict, Any, Optional\n\nimport click\nfrom fastapi import FastAPI\nfrom pydantic import BaseModel\n\nfrom dspy_cli.utils.venv import detect_venv_python\nfrom dspy_cli.errors import DSPyError\n</code></pre>"},{"location":"contributing/#naming","title":"Naming","text":"<ul> <li>Functions and variables: <code>snake_case</code></li> <li>Classes: <code>PascalCase</code></li> <li>Constants: <code>UPPER_SNAKE_CASE</code></li> <li>Type hints required for all function signatures</li> </ul>"},{"location":"contributing/#file-paths","title":"File Paths","text":"<ul> <li>Use <code>Path</code> from <code>pathlib</code>, not strings</li> <li>Example: <code>Path.cwd() / \"dspy.config.yaml\"</code> not <code>\"dspy.config.yaml\"</code></li> </ul>"},{"location":"contributing/#error-handling","title":"Error Handling","text":"<ul> <li>Use custom exceptions from <code>dspy_cli/errors.py</code></li> <li>Available: <code>DSPyError</code>, <code>DSPyCommandError</code>, <code>ValidationError</code>, etc.</li> </ul>"},{"location":"contributing/#type-hints","title":"Type Hints","text":"<p>All functions must have type hints:</p> <pre><code>from typing import Optional\nfrom pathlib import Path\n\ndef load_config(path: Optional[Path] = None) -&gt; dict[str, Any]:\n    \"\"\"Load configuration from YAML file.\"\"\"\n    ...\n</code></pre>"},{"location":"contributing/#project-structure","title":"Project Structure","text":"<pre><code>dspy-cli/\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 dspy_cli/\n\u2502       \u251c\u2500\u2500 cli.py              # Main CLI entry point\n\u2502       \u251c\u2500\u2500 commands/           # CLI commands\n\u2502       \u2502   \u251c\u2500\u2500 new.py\n\u2502       \u2502   \u251c\u2500\u2500 serve.py\n\u2502       \u2502   \u251c\u2500\u2500 deploy.py\n\u2502       \u2502   \u2514\u2500\u2500 generate.py\n\u2502       \u251c\u2500\u2500 server/             # FastAPI server\n\u2502       \u251c\u2500\u2500 discovery/          # Module discovery\n\u2502       \u251c\u2500\u2500 utils/              # Utilities\n\u2502       \u251c\u2500\u2500 templates/          # Project templates\n\u2502       \u2514\u2500\u2500 errors.py           # Custom exceptions\n\u251c\u2500\u2500 tests/                      # Test files\n\u251c\u2500\u2500 docs/                       # Documentation\n\u251c\u2500\u2500 pyproject.toml             # Package configuration\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"contributing/#making-changes","title":"Making Changes","text":""},{"location":"contributing/#1-create-a-branch","title":"1. Create a Branch","text":"<pre><code>git checkout -b feature/my-feature\n# or\ngit checkout -b fix/my-bugfix\n</code></pre>"},{"location":"contributing/#2-make-your-changes","title":"2. Make Your Changes","text":"<ul> <li>Write tests for new features</li> <li>Update documentation if needed</li> <li>Follow code style conventions</li> <li>Add type hints</li> </ul>"},{"location":"contributing/#3-run-tests","title":"3. Run Tests","text":"<pre><code>pytest\n</code></pre>"},{"location":"contributing/#4-commit-your-changes","title":"4. Commit Your Changes","text":"<pre><code>git add .\ngit commit -m \"feat: add new feature\"\n</code></pre> <p>Use conventional commits: - <code>feat:</code> - New feature - <code>fix:</code> - Bug fix - <code>docs:</code> - Documentation changes - <code>test:</code> - Test changes - <code>refactor:</code> - Code refactoring - <code>chore:</code> - Maintenance tasks</p>"},{"location":"contributing/#releasing","title":"Releasing","text":"<p>For information on how to release new versions to PyPI, see Releasing.</p>"},{"location":"contributing/#5-push-and-create-pr","title":"5. Push and Create PR","text":"<pre><code>git push origin feature/my-feature\n</code></pre> <p>Then create a Pull Request on GitHub.</p>"},{"location":"contributing/#adding-new-commands","title":"Adding New Commands","text":"<p>To add a new command:</p> <ol> <li>Create command file in <code>src/dspy_cli/commands/</code>:</li> </ol> <pre><code># src/dspy_cli/commands/my_command.py\nimport click\n\n@click.command()\n@click.argument('name')\n@click.option('--flag', is_flag=True)\ndef my_command(name, flag):\n    \"\"\"Description of my command.\"\"\"\n    click.echo(f\"Hello {name}\")\n</code></pre> <ol> <li>Register in CLI (<code>src/dspy_cli/cli.py</code>):</li> </ol> <pre><code>from dspy_cli.commands.my_command import my_command\n\nmain.add_command(my_command)\n</code></pre> <ol> <li>Add tests (<code>tests/test_my_command.py</code>):</li> </ol> <pre><code>from click.testing import CliRunner\nfrom dspy_cli.commands.my_command import my_command\n\ndef test_my_command():\n    runner = CliRunner()\n    result = runner.invoke(my_command, ['World'])\n    assert result.exit_code == 0\n    assert 'Hello World' in result.output\n</code></pre> <ol> <li>Update documentation (<code>docs/cli-reference.md</code>)</li> </ol>"},{"location":"contributing/#testing-locally","title":"Testing Locally","text":""},{"location":"contributing/#test-with-sample-app","title":"Test with Sample App","text":"<pre><code># From project root\ncd sample_app\n\n# Serve locally\ndspy-cli serve\n\n# In another terminal, test\ncurl -X POST \"http://localhost:8000/predict/qa\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"question\": \"What is DSPy?\"}'\n</code></pre>"},{"location":"contributing/#test-new-project-creation","title":"Test New Project Creation","text":"<pre><code># Create test project\ndspy-cli new test-project -s \"question -&gt; answer\"\ncd test-project\n\n# Install and serve\nuv sync\ndspy-cli serve\n</code></pre>"},{"location":"contributing/#test-deployment","title":"Test Deployment","text":"<p>For local deployment testing, see the Makefile in the project root for local control plane setup.</p>"},{"location":"contributing/#common-development-tasks","title":"Common Development Tasks","text":""},{"location":"contributing/#update-templates","title":"Update Templates","text":"<p>Templates are in <code>src/dspy_cli/templates/</code>:</p> <ul> <li><code>pyproject.toml.template</code></li> <li><code>dspy.config.yaml.template</code></li> <li><code>Dockerfile.template</code></li> <li>Code templates in <code>code_templates/</code></li> </ul> <p>After updating, test with:</p> <pre><code>dspy-cli new test-project\n</code></pre>"},{"location":"contributing/#add-new-module-type","title":"Add New Module Type","text":"<p>To support a new DSPy module type in <code>generate scaffold</code>:</p> <ol> <li>Add to <code>MODULE_TYPES</code> in <code>src/dspy_cli/commands/generate.py</code></li> <li>Create template in <code>src/dspy_cli/templates/code_templates/</code></li> <li>Update docs</li> </ol>"},{"location":"contributing/#documentation","title":"Documentation","text":"<p>Documentation uses MkDocs with Material theme.</p>"},{"location":"contributing/#build-docs-locally","title":"Build Docs Locally","text":"<pre><code># Install docs dependencies\npip install -e '.[docs]'\n\n# Serve docs locally\nmkdocs serve\n\n# Build static site\nmkdocs build\n</code></pre> <p>Visit http://localhost:8000 to preview.</p>"},{"location":"contributing/#update-docs","title":"Update Docs","text":"<ul> <li><code>docs/index.md</code> - Main landing page</li> <li><code>docs/cli-reference.md</code> - CLI command reference</li> <li><code>docs/contributing.md</code> - This file</li> <li><code>mkdocs.yml</code> - MkDocs configuration</li> </ul>"},{"location":"contributing/#reporting-issues","title":"Reporting Issues","text":"<p>Found a bug or have a feature request?</p> <ol> <li>Check existing issues: GitHub Issues</li> <li>Create new issue with:</li> <li>Clear description</li> <li>Steps to reproduce (for bugs)</li> <li>Expected vs actual behavior</li> <li>Environment info (OS, Python version, dspy-cli version)</li> </ol>"},{"location":"contributing/#getting-help","title":"Getting Help","text":"<ul> <li>Issues: GitHub Issues</li> <li>Discussions: GitHub Discussions</li> </ul>"},{"location":"contributing/#code-of-conduct","title":"Code of Conduct","text":"<p>Be respectful, inclusive, and professional. We're all here to build great tools together.</p>"},{"location":"contributing/#license","title":"License","text":"<p>By contributing, you agree that your contributions will be licensed under the same license as the project (MIT).</p>"},{"location":"releasing/","title":"Release Process","text":"<p>This document describes how to release new versions of dspy-cli to PyPI.</p>"},{"location":"releasing/#release-workflow","title":"Release Workflow","text":""},{"location":"releasing/#1-prepare-the-release","title":"1. Prepare the Release","text":"<pre><code>cd dspy-cli\n\n# Ensure you're on main and up to date\ngit checkout main\ngit pull origin main\n\n# Run tests locally\npytest\n\n# Run linter\nruff check .\n</code></pre>"},{"location":"releasing/#2-update-version","title":"2. Update Version","text":"<p>Edit <code>pyproject.toml</code> and update the version:</p> <pre><code>[project]\nname = \"dspy-cli\"\nversion = \"0.2.0\"  # Update this\n</code></pre>"},{"location":"releasing/#3-commit-and-tag","title":"3. Commit and Tag","text":"<pre><code># Commit the version bump\ngit add pyproject.toml\ngit commit -m \"Release v0.2.0\"\ngit push origin main\n\n# Create an annotated tag (must match pyproject.toml version)\ngit tag -a v0.2.0 -m \"Release v0.2.0\"\n\n# Push the tag to trigger the workflow\ngit push origin v0.2.0\n</code></pre>"},{"location":"releasing/#4-monitor-the-workflow","title":"4. Monitor the Workflow","text":"<ol> <li>Go to: https://github.com/caisco/optimization-platform/actions</li> <li>Watch the \"Publish to PyPI\" workflow run</li> <li>The workflow will:</li> <li>\u2705 Test on Python 3.11 and 3.12</li> <li>\u2705 Lint with ruff</li> <li>\u2705 Verify tag matches pyproject.toml version</li> <li>\u2705 Build sdist and wheel</li> <li>\u2705 Validate with twine check</li> <li>\u2705 Publish to PyPI (using OIDC, no secrets needed!)</li> </ol>"},{"location":"releasing/#5-verify-the-release","title":"5. Verify the Release","text":"<p>After the workflow succeeds:</p> <pre><code># Check PyPI\nopen https://pypi.org/project/dspy-cli/\n\n# Test installation\npip install --upgrade dspy-cli\n\n# Verify version\ndspy-cli --version\n</code></pre>"},{"location":"releasing/#version-scheme","title":"Version Scheme","text":"<p>We follow Semantic Versioning:</p> <ul> <li>MAJOR version (1.0.0): Incompatible API changes</li> <li>MINOR version (0.2.0): New functionality, backwards compatible</li> <li>PATCH version (0.1.1): Bug fixes, backwards compatible</li> </ul> <p>Tags must follow the format: <code>v{MAJOR}.{MINOR}.{PATCH}</code></p> <p>Examples: - <code>v0.1.0</code> - Initial alpha release - <code>v0.2.0</code> - New features added - <code>v0.2.1</code> - Bug fix - <code>v1.0.0</code> - Stable release</p>"},{"location":"releasing/#troubleshooting","title":"Troubleshooting","text":""},{"location":"releasing/#tagversion-mismatch","title":"Tag/Version Mismatch","text":"<p>If you get an error like: <pre><code>\u274c Version mismatch: pyproject.toml=0.2.0 tag=0.1.9\n</code></pre></p> <p>The tag doesn't match the version in pyproject.toml. Fix it:</p> <pre><code># Delete the incorrect tag locally and remotely\ngit tag -d v0.1.9\ngit push origin :refs/tags/v0.1.9\n\n# Update pyproject.toml to the correct version, commit, and retag\n</code></pre>"},{"location":"releasing/#failed-publish","title":"Failed Publish","text":"<p>If the workflow fails before publishing to PyPI: - Fix the issue - Delete the tag: <code>git push origin :refs/tags/vX.Y.Z</code> - Re-tag and push again</p> <p>If the workflow succeeded but the release has issues: - Yank the release on PyPI (Settings \u2192 \"Yank release\") - Create a new patch version (e.g., if v0.2.0 failed, release v0.2.1) - PyPI uploads are immutable - you cannot delete or replace them</p>"},{"location":"releasing/#first-time-publish","title":"First-Time Publish","text":"<p>The first publish requires the PyPI Trusted Publisher to be configured. If you see: <pre><code>Error: Invalid or non-existent authentication information\n</code></pre></p> <p>Double-check the Trusted Publisher configuration on PyPI matches: - Owner: <code>caisco</code> - Repository: <code>optimization-platform</code> - Workflow: <code>publish.yml</code> - Environment: <code>pypi</code></p>"},{"location":"releasing/#rolling-back","title":"Rolling Back","text":"<p>If a release needs to be rolled back:</p> <ol> <li> <p>Yank on PyPI: Mark the version as yanked (prevents new installs)    <pre><code># Via web UI: https://pypi.org/manage/project/dspy-cli/release/X.Y.Z/\n# Or via CLI:\ntwine upload --skip-existing --repository pypi dist/*  # if you have credentials\n</code></pre></p> </li> <li> <p>Release a fix: Bump to the next patch version with fixes    <pre><code># If v0.2.0 was bad, release v0.2.1 with fixes\n</code></pre></p> </li> <li> <p>Communicate: Update GitHub Releases and changelog to warn users</p> </li> </ol>"},{"location":"releasing/#testing-releases-optional","title":"Testing Releases (Optional)","text":"<p>To test the release process without publishing to PyPI:</p> <ol> <li>Set up a TestPyPI Trusted Publisher (same steps, but on https://test.pypi.org)</li> <li>Modify the workflow to use TestPyPI repository URL temporarily</li> <li>Use pre-release tags like <code>v0.2.0rc1</code> for testing</li> </ol> <p>See TestPyPI docs for details.</p>"}]}